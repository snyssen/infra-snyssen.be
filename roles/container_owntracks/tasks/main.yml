- name: Creating folders
  become: true
  ansible.builtin.file:
    path: "{{ item.src }}"
    state: directory
    owner: "{{ item.owner }}"
    mode: "{{ item.mode }}"
    group: "{{ item.group }}"
  with_items:
    # Owntracks recorder
    - src: "{{ docker_mounts_directory }}/owntracks/recorder/config"
      owner: "{{ ansible_user_uid }}"
      group: "{{ ansible_user_gid }}"
      mode: "700"
    - src: "{{ docker_mounts_directory }}/owntracks/recorder/store"
      owner: "{{ ansible_user_uid }}"
      group: "{{ ansible_user_gid }}"
      mode: "700"
    # EQMX
    - src: "{{ docker_mounts_directory }}/owntracks/mqtt/data"
      owner: "{{ ansible_user_uid }}"
      group: "{{ ansible_user_gid }}"
      mode: "700"
    - src: "{{ docker_mounts_directory }}/owntracks/mqtt/etc"
      owner: "{{ ansible_user_uid }}"
      group: "{{ ansible_user_gid }}"
      mode: "700"
    - src: "{{ docker_mounts_directory }}/owntracks/mqtt/log"
      owner: "{{ ansible_user_uid }}"
      group: "{{ ansible_user_gid }}"
      mode: "700"

- ansible.builtin.include_role:
    name: snyssen.compose_deploy
  vars:
    stack_name: owntracks
