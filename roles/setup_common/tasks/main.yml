- become: true
  block:
    - name: Installing and configuring docker
      ansible.builtin.include_role:
        name: geerlingguy.docker
      vars:
        docker_users:
          - "{{ ansible_user_id }}"
        docker_daemon_options:
          log-driver: json-file
          log-opts:
            labels-regex: ^.+

- name: Installing other packages
  become: true
  ansible.builtin.package:
    name:
      # - cronie
      # - cronie-anacron
      - git
      - python3-pip
      - docker-compose
      - zsh
      - curl
      - nano
      - htop
      - screen
      # - lm_sensors
    state: present

- name: Installing OhMyZsh with PowerLevel10K theme
  ansible.builtin.include_role:
    name: tomereli.oh_my_zsh_p10k
  vars:
    users:
      - username: "{{ ansible_user_id }}"
    oh_my_zsh_plugins:
      - colored-man-pages
      - colorize
      - docker-compose
      - docker
      - screen
      - zsh-autosuggestions
      - zsh-syntax-highlighting
    p10k_src_file: custom.p10k.zsh
# - name: Resetting connection so above change takes effect
#   ansible.builtin.meta: reset_connection
