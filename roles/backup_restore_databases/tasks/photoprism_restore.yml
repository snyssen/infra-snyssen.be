- name: Querying available dumps
  ansible.builtin.include_tasks: restore_individual_db.yml
  vars:
    dump_dir: "/mnt/storage/backups/photoprism/mysql"
    dump_pattern: ".+\\.sql$"

- ansible.builtin.debug:
    var: selected_dump

- name: "Restoring photoprism"
  community.docker.docker_container_exec:
    container: "photoprism"
    command: photoprism restore -i /backups/{{ selected_dump }}
