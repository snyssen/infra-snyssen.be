- name: Creating folders
  ansible.builtin.file:
    path: "{{ docker_compose_directory }}/restic/hooks"
    state: directory

- name: Deploying pre- and post-backup scripts
  ansible.builtin.copy:
    src: "{{ item }}"
    dest: "{{ docker_compose_directory }}/restic/hooks/{{ item }}"
    mode: "770"
  with_items:
    - pre-backup.sh
    - post-backup.sh

- ansible.builtin.include_role:
    name: container-deploy
  vars:
    container_name: "restic"
