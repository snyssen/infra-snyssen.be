- name: Creating folders
  ansible.builtin.file:
    path: "{{ item }}"
    state: directory
  with_items:
    - "/mnt/storage/scrutiny"
    - "{{ docker_mounts_directory }}/monitoring/influxdb"
    - "/mnt/storage/prometheus"

- name: Deploying Scrutiny configuration
  ansible.builtin.template:
    src: scrutiny.yaml
    dest: /mnt/storage/scrutiny/
    mode: 0644

- name: Deploying Prometheus configuration
  ansible.builtin.template:
    src: prometheus.yml
    dest: /mnt/storage/prometheus/
    mode: 0644

- ansible.builtin.include_role:
    name: snyssen.compose_deploy
  vars:
    container_name: monitoring
