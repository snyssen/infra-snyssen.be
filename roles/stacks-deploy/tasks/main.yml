- name: Adding user to docker group
  become: yes
  user:
    name: "{{ ansible_user_id }}"
    groups: docker
    append: yes

- name: Resetting connection so above change takes effect
  meta: reset_connection

- name: Starting and enabling docker service
  become: yes
  service:
    name: docker
    state: started
    enabled: yes

- name: Creating web network
  ansible.builtin.docker_network:
    name: web

- ansible.builtin.include_role:
    name: container-backbone
- ansible.builtin.include_role:
    name: container-gitlab
- ansible.builtin.include_role:
    name: container-streaming
- ansible.builtin.include_role:
    name: container-nextcloud
- ansible.builtin.include_role:
    name: container-photoprism
- ansible.builtin.include_role:
    name: container-recipes
- ansible.builtin.include_role:
    name: container-snyssen.be
- ansible.builtin.include_role:
    name: container-speedtest
- ansible.builtin.include_role:
    name: container-wikijs
- ansible.builtin.include_role:
    name: container-backups
