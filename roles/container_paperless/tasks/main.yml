- name: Creating folders
  ansible.builtin.file:
    path: "{{ item }}"
    state: directory
  with_items:
    - "{{ docker_mounts_directory }}/paperless/redis"
    - "{{ docker_mounts_directory }}/paperless/postgres"
    - /mnt/storage/backups/paperless
    - "{{ docker_mounts_directory }}/paperless/data"
    - /mnt/storage/paperless/media
    - /mnt/storage/paperless/export
    - /mnt/storage/paperless/consume

- name: Deploying hooks for database backups
  ansible.builtin.copy:
    src: pgsql_backups_hooks
    dest: "{{ docker_compose_directory }}/paperless/hooks/"
    mode: 0770

- ansible.builtin.include_role:
    name: snyssen.compose_deploy
  vars:
    container_name: "paperless"
